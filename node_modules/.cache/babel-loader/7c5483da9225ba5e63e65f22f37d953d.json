{"ast":null,"code":"var _jsxFileName = \"/Users/aqutor/Dev/SMangerPanel/src/Component/LoginForm/LoginForm.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport './LoginForm.css';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\n\nclass LoginForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: null,\n      password: null,\n      pwdVal: null,\n      ifClicked: false,\n      valAlert: {\n        type: null,\n        msg: null\n      },\n      SubmitText: '提交'\n    };\n\n    this.usernameChangeHandler = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n\n    this.passwordChangeHandler = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.postCredHandler = () => {\n      this.setState({\n        ifClicked: true\n      });\n      const postData = {\n        sid: this.state.username,\n        pwd: this.state.password\n      };\n      axios.post('https://smp-api.cloud.airscr.com/api/login', postData).then(res => {\n        this.setState({\n          info: res.data\n        });\n\n        if (this.state.info.code !== 200) {\n          this.setState({\n            ifClicked: false,\n            pwdVal: false\n          });\n        } else if (this.state.info.code === 200) {\n          this.setState({\n            pwdVal: true\n          });\n        }\n\n        console.log(\"RESPONSE RECEIVED: \", this.state.info);\n        console.log(res);\n      }).catch(err => {\n        console.log(\"AXIOS ERROR: \", err);\n      });\n    };\n  }\n\n  componentDidUpdate() {\n    if (this.state.ifClicked && this.state.SubmitText === '提交') {\n      this.setState({\n        SubmitText: '请稍等...'\n      });\n    }\n\n    if (!this.state.ifClicked && this.state.SubmitText === '请稍等...') {\n      this.setState({\n        SubmitText: '提交'\n      });\n    }\n\n    if (this.state.valAlert.type === null && this.state.valAlert.type !== 'success' && this.state.valAlert.type !== 'danger' && this.state.pwdVal === true) {\n      this.setState({\n        valAlert: {\n          type: 'success',\n          msg: 'hey, u r good to go.'\n        }\n      });\n    }\n\n    if (this.state.valAlert.type === null && this.state.valAlert.type !== 'success' && this.state.valAlert.type !== 'danger' && this.state.pwdVal === false) {\n      this.setState({\n        valAlert: {\n          type: 'danger',\n          msg: 'hey, u\\'d better check your info again.'\n        }\n      });\n    }\n\n    if (this.state.valAlert.type === 'success' && this.state.pwdVal === false) {\n      this.setState({\n        valAlert: {\n          type: 'danger',\n          msg: 'hey, u\\'d better check your info again.'\n        }\n      });\n    }\n\n    if (this.state.valAlert.type === 'danger' && this.state.pwdVal === true) {\n      this.setState({\n        valAlert: {\n          type: 'success',\n          msg: 'hey, u r good to go.'\n        }\n      });\n    }\n  }\n\n  render() {\n    const PwdInfo = () => {\n      if (this.state.pwdVal !== null) {\n        if (this.state.pwdVal) {\n          return React.createElement(Alert, {\n            variant: \"success\",\n            className: \"InFormAlert\",\n            id: \"alertLoginSuccess\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          }, \" hey, u r good to go.\");\n        } else {\n          return React.createElement(Alert, {\n            variant: \"danger\",\n            className: \"InFormAlert\",\n            id: \"alertLoginFail\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          }, \" hey, u'd better check your info again.\");\n        }\n      }\n    };\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      className: \"InFormAlert\",\n      variant: \"warning\",\n      id: \"alertConstuction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \" The site is still under constuction.\"), React.createElement(Alert, {\n      className: \"InFormAlert\",\n      variant: \"info\",\n      id: \"alertBrowser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \" Internet Explorer is not supported. For better performance, browsers based on the Chromium core is recommended.\"), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"formBasicEmail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"\\u767B\\u5F55 - \\u6668\\u8DD1\\u7BA1\\u7406\\u7CFB\\u7EDF\"), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \" \"), React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"\\u5B66\\u53F7\",\n      onChange: event => this.usernameChangeHandler(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"formBasicPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"password\",\n      placeholder: \"\\u5BC6\\u7801\",\n      onChange: event => this.passwordChangeHandler(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })), React.createElement(Button, {\n      block: true,\n      variant: \"primary\",\n      onClick: this.postCredHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, this.state.SubmitText), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Form.Text, {\n      className: \"text-muted\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801?\"), PwdInfo));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/aqutor/Dev/SMangerPanel/src/Component/LoginForm/LoginForm.js"],"names":["React","Component","Form","Button","Alert","axios","LoginForm","state","username","password","pwdVal","ifClicked","valAlert","type","msg","SubmitText","usernameChangeHandler","event","setState","target","value","passwordChangeHandler","postCredHandler","postData","sid","pwd","post","then","res","info","data","code","console","log","catch","err","componentDidUpdate","render","PwdInfo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport './LoginForm.css';\nimport Alert from 'react-bootstrap/Alert';\nimport axios from 'axios';\n\n\nclass LoginForm extends Component {\n\n    state = {\n        username: null,\n        password: null,\n        pwdVal: null,\n        ifClicked: false,\n        valAlert: {\n            type: null,\n            msg: null,\n        },\n        SubmitText: '提交',\n        \n    }\n    \n    usernameChangeHandler = (event) => {\n        this.setState({\n            username: event.target.value,\n        })\n    }\n\n    passwordChangeHandler = (event) => {\n        this.setState({\n            password: event.target.value,\n        })\n    }\n\n    \n\n\n    postCredHandler = () => {\n        this.setState({\n            ifClicked: true,\n        });\n\n        const postData = {\n            sid: this.state.username,\n            pwd: this.state.password,\n        }\n\n        axios.post('https://smp-api.cloud.airscr.com/api/login', postData)\n            .then((res) => {\n                this.setState({\n                    info: res.data,\n                })\n\n                if (this.state.info.code !== 200){\n                    this.setState({\n                        ifClicked: false,\n                        pwdVal: false,\n                    })\n                }\n                else if(this.state.info.code === 200){\n                    this.setState({\n                        pwdVal: true,\n                    })\n                }\n\n                \n                console.log(\"RESPONSE RECEIVED: \", this.state.info);\n                console.log(res);\n              })\n              .catch((err) => {\n                \n                console.log(\"AXIOS ERROR: \", err);\n              })\n\n    }\n\n\n    \n    componentDidUpdate(){\n        if(this.state.ifClicked && this.state.SubmitText === '提交'){\n            this.setState({\n                SubmitText: '请稍等...',\n            })\n        }\n\n        if(!this.state.ifClicked && this.state.SubmitText === '请稍等...'){\n            this.setState({\n                SubmitText: '提交',\n            })\n        }\n\n        if(this.state.valAlert.type === null && this.state.valAlert.type !== 'success' && this.state.valAlert.type !== 'danger' && this.state.pwdVal === true){\n            this.setState({\n                valAlert: {\n                    type: 'success',\n                    msg: 'hey, u r good to go.'\n                }\n            })            \n        }\n\n        if(this.state.valAlert.type === null && this.state.valAlert.type !== 'success' && this.state.valAlert.type !== 'danger' && this.state.pwdVal === false){\n            this.setState({\n                valAlert: {\n                    type: 'danger',\n                    msg: 'hey, u\\'d better check your info again.'\n                }\n            })            \n        }\n\n        if(this.state.valAlert.type === 'success' && this.state.pwdVal === false){\n            this.setState({\n                valAlert: {\n                    type: 'danger',\n                    msg: 'hey, u\\'d better check your info again.'\n                }\n            }) \n        }\n\n        if(this.state.valAlert.type === 'danger' && this.state.pwdVal === true){\n            this.setState({\n                valAlert: {\n                    type: 'success',\n                    msg: 'hey, u r good to go.'\n                }\n            }) \n        }\n    }\n\n    \n    \n\n    render() {\n        const PwdInfo = () => {\n            if (this.state.pwdVal !== null){\n                if(this.state.pwdVal){\n                    return(\n                        <Alert variant = 'success' className = 'InFormAlert' id = 'alertLoginSuccess' > hey, u r good to go.</Alert>\n                    )\n                }\n                else{\n                    return(\n                        <Alert variant = 'danger' className = 'InFormAlert' id = 'alertLoginFail' > hey, u'd better check your info again.</Alert> \n                    )\n                }\n            }\n        }\n\n        return (\n            <div>\n                <Alert className = 'InFormAlert' variant = 'warning' id = 'alertConstuction'> The site is still under constuction.</Alert>\n                <Alert className = 'InFormAlert' variant = 'info' id = 'alertBrowser'> Internet Explorer is not supported. For better performance, browsers based on the Chromium core is recommended.</Alert>\n                \n                <Form>\n                    <Form.Group controlId=\"formBasicEmail\">\n                        <h1>登录 - 晨跑管理系统</h1>\n                        <h1> </h1>\n                        <Form.Control type=\"text\" placeholder=\"学号\" onChange = {(event) => this.usernameChangeHandler(event)} />\n                    </Form.Group>    \n                    <Form.Group controlId=\"formBasicPassword\">\n                        <Form.Control type=\"password\" placeholder=\"密码\" onChange = {(event) => this.passwordChangeHandler(event)} />\n                    </Form.Group>\n                        <Button block variant=\"primary\" onClick = {this.postCredHandler}>\n                            {this.state.SubmitText}\n                        </Button>\n                        <p></p>\n                        <Form.Text className=\"text-muted\" >\n                            忘记密码?\n                        </Form.Text>\n                        {PwdInfo}\n                </Form>\n            </div>\n        )\n    }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}